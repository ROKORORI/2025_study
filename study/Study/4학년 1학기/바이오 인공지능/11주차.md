- 병리학
	- 질병의 원인과 상태를 조직이나 세포수준에서 관찰해 파악하는 의학의 한 분야
	- 보통 현미경을 통해 염색된 조직 슬라이드를 관찰
	- 특히 암진단에서 병리학은 가장 신뢰받는 표준 진단법
	- 최근에는 이런 슬라이드를 디지털화하여 AI가 분석하는 디지털 병리확도 활발히 연구됨
- Whole Slide Image
	- WSI
		- 슬라이드 전체를 스캔한 초고해상도 이미지
		- 수십만 * 수십만 픽셀크기 = 수백MB ~ 수GB 용량
		- 계층적 줌 레벨 보유(Microscope like interface)
	- 일반 이미지 파일과 달리 고해상도 조직 이미지를 슬라이드 전체 단위로 저장
		- 썸네일
			- 빠르게 전체 구조를 볼 수 있는 저해상도
		- 중간 해상도 레벨
			- 줌 인/아웃 시 자동 전환
		- 최고 해상도 레벨
			- 현미경 수준으로 세포관찰 가능
	- 포맷
		- .svs, .ndpi, .tiff, .mrxs, .scn
	- 뷰어
		- openslide, asap, qupath

- 병리이미지 분석 인공지능 모델의 필요성
	- 슬라이드 1장에 수천개 타일
		- 병리의사가 모든 영역을 빠짐없이 확인하기 어렵고, 시간이 많이 소요됨
	- 병리의사간 진단 편차 존재
		- 동일한 슬라이드라도 진단 결과가 다를 수 있음
		- 병리학은 전문가의 경험과 직관에 크게 의존
	- 대규모 병리 영상 분석의 자동화 필요
		- 대형 병원, 암센터 등에서 슬라이드 수천장 이상을 주기적으로 분석해야 함

- WSI 처리 파이프라인
	- WSI 전체 이미지
	- 전처리 후 Tissue
		- 배경영역이 많아 조직 영역만 추출
		- 보통 Otsu thresholding, 색 기반 필터링 등으로 전처리
	- 타일로 분할
		- 일정 크기의 작은 조각(타일)로 분할함
		- 슬라이드당 수천개 이상
		- 각 타일은 독립적인 이미지처럼 처리 가능
	- 각 타일 CNN 특징 추출
		- CNN 기반 모델을 사용해 특징 벡터 추출
		- 타일을 벡터 공간에 표현하여 계산가능하도록 만듦
		- 최근 ViT(Vision Transformer) 기반 모델 활용
	- MIL or Attention으로 병리 예측
		- 수천개 타일 -> 슬라이드 하나로 통합된 예측결과 생성
		- MIL (Multiple instance learning)
			- 타일들을 집합(bag) -> 병리학적 결과 예측
		- Attention
			- 중요한 타일에 가중치 부여
	- 슬라이드 level 결과 및 heatmap 시각화

- MIL (Multiple Instance Learning)
	- Weakly Supervised Learning의 한 형태
	- 개별 인스턴스에 대한 레이블 없이, 슬라이드 전체에 대한 레이블만으로 학습
	
	- 핵심개념
		- Bag
			- 슬라이드 전체 이미지(WSI)
		- Instance
			- 슬라이드를 분할한 작은 이미지 조각(타일)
		- 레이블
			- 슬라이드 단위로만 존재하며, 개별 타일에는 레이블이 없음
	- 기본가정
		- 양성(Bag Postive)
			- 하나 이상의 인스턴스가 양성
		- 음성(Bag Negative)
			- 모든 인스턴스가 음성
	
	- 과정
		- 4개 step
		- Patch Selection Method
			- WSI에서 어떤 patch를 추출하여 모델 학습 및 분석에 활용할 것인가?
			- 완전 랜덤, ROI(Region Of Interest) 기반 랜덤, 데이터 특징 기반 선택
		- Transformation Function
			- Patch 데이터를 임베딩 벡터로 변환하는 모듈
			- CNN, ViT등의 다양한 방법 활용
		- Pooling Operation
			- avg pooling, attention기반 등 여러가지 방법을 활용
			- Patch의 정보를 종합해서 WSI의 임베딩 벡터 생성
		- WSI-level Predictor
			- MLP 등으로 WSI의 라벨을 예측
- 
